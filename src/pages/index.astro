---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import SearchFilter from '../components/SearchFilter.astro';
import PersonalCard from '../components/PersonalCard.astro';
import personals from '../data/personals.json';

// Sort by date (newest first)
personals.sort((a, b) => new Date(b.date_posted).getTime() - new Date(a.date_posted).getTime());
---

<Layout title="Queer Jewish Personals - Find Meaningful Connections">
  <Header />
  
  <main class="min-h-screen bg-gray-50">
    <!-- Simple Title Header -->
    <div class="w-full xl:max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-8 mb-2">
      <h1 class="font-serif text-2xl md:text-3xl font-bold text-gray-900 tracking-tight" style="font-family: 'Playfair Display', serif;">
        Find Your Community
      </h1>
    </div>

    <!-- Content Section -->
    <section class="py-4">
      <div class="w-full xl:max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Search and Filter -->
        <SearchFilter />

        <!-- Personals Grid -->
        <div id="personals-container" class="grid grid-cols-1 md:grid-cols-2 gap-12">
          {personals.map((personal) => (
            <PersonalCard {...personal} />
          ))}
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="hidden text-center py-12">
          <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33" />
          </svg>
          <h3 class="mt-2 text-sm font-medium text-gray-900">No personals found</h3>
          <p class="mt-1 text-sm text-gray-500">Try adjusting your search or filters.</p>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>
